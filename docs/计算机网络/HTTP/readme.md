---
title: HTTP
# icon: note
category: 计算机网络
# star: 9
# sticky: 9
---

## 基本方法

### GET

- 从服务器获取资源

### POST

- 从服务器创建资源

### PUT

- 在服务器修改资源（幂等）
  :::danger
  POST 和 PUT 的区别：调用 POST10 次，会在服务器创建 10 个资源。调用 PUT10 十次，在服务器只会创建一个资源
  :::

### DELETE

- 在服务器创建资源

### OPTION

- 和跨域相关

### TRACE 用于调试

- 多数网站不支持

### CONNECT

- 和代理相关

### PATCH

- 对资源进行部分更新（很少用，put 用的多）

## 常见状态码

:::warning
多数服务端开发已经不遵循这些状态码

- 这会使状态码缺少语义
- 如果都是 json 请求，可以在返回的数据里再约定

:::

- 1XX：提供信息
  - 100 continue 提供信息
  - 101 切换协议，http 协议切换成 websocket 协议
- 2XX：成功
  - 200 ok
  - 201 created 已创建
  - 202 Accepted 已接受（客户端发送一个请求，服务器返回 202 表示收到，但是最终的结果可能需要等服务器通知，如轮训）
  - 203 非权威的内容（比如获取的数据被代理服务器修改过）
  - 204 没有内容
  - 205 重置内容
  - 206 range header 下发部分内容
    :::tip
    面试困惑：301 和 308 有什么区别
    相同点：都是永久重定向新的地址  
    不同点：客户端接受到 308 后，之前是什么 method，之后也沿用相同的 method，而 301 会向新地址发送 get 请求

面试困惑：302 和 303，307 有什么区别
相同点：将资源临时放在新地址
不同点：302 是 http1.0 提出的，但是很多浏览器没有按照规范。所有请求斗使用 get 重定向

后面添加了 303 和 307，303 使用 get 重定向，307 使用相同的
:::

- 3XX：重定向
  - 300 用户请求了多个选项的资源
  - 301 永久重定向（使用 get 重定向）
  - 302 临时重定向（被拆封成 303 和 307）
  - 303 使用 get 临时重定向
  - 304 没有修改
  - 305 需要代理访问
  - 307 返回相同的方式临时重定向
  - 308 返回相同的方式永久重定向
- 4XX：客户端错误
  - 400 请求的格式错误
  - 401 没有授权
  - 402 请先收费
  - 403 禁止访问
  - 404 没有找到
  - 405 方法不被允许（这个方法直接受 get 你使用了 post）
  - 406 服务端提供的内容和客户端期待的不一样
- 5XX：服务端错误
  - 500 服务器错误
  - 501 没有实现（接口还没写，但是知道有这个功能）
  - 502 网关错误
  - 503 服务不可用
  - 504 网关超时
  - 505 版本不支持

## HTTP 常见头部

### Content-Length

发送给接受者的 body 内容长度（字节）

- 一个 byte 是 bit
- utf-8 的字符是 1 ～ 4 个字节不等，Content-Length 不知道里面有几个字符

### User-Agent

帮助区分客户端特性

- 操作系统
- 浏览器
- 制造商 (手机类型)
- 内核类型
- 版本号
  。。。

### Content-type

区分资源类型

- text/html
- text/css
- application/json
- image/jpeg

### Origin

描述请求来源地址

- scheme：//host：port

* 不含路径
* 可能是 null：从空白页打开百度

### Accept

建议服务端返回何种媒体类型

- */*代表所有类型
- 多类型用逗号分隔

* Accept-Encoding：建议服务端返回什么编码（压缩算法）
  - deflate，gzip;q=1.0,\*q=0.5 q 表示权重
* Accept-Language：建议服务端返回什么语言
  - Accept-Language：fc-CH，fr;q=0.8,en;q=0.7

### Referer

告诉服务端打开页面的上一张页面是什么，如果是 ajax 请求，返回的是当前网页。和 Origin 很像

- 非浏览器可能有的时候不发送 Referer（爬虫）
- 用于用户行为分析

### Connect

决定连接是否在当前事务结束后关闭

- http1.0 是 close
- http1.1 默认是 keep-alive

## HTTP 常见返回头
